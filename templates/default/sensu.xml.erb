<!--
  Windows service definition for Sensu
  MANAGED BY CHEF
-->
<service>
  <id><%= @service %></id>
  <name><%= @name %></name>
  <description>This service runs a <%= @name %></description>
  <executable>C:\opt\sensu\embedded\bin\ruby</executable>
  <argument>C:\opt\sensu\embedded\bin\<%= @service %></argument>
  <argument>-c</argument>
  <argument><%= node["sensu"]["directory"] %>\config.json</argument>
  <argument>-d</argument>
  <argument><%= node["sensu"]["directory"] %>\conf.d</argument>
  <argument>-e</argument>
  <argument><%= node["sensu"]["directory"] %>\extensions</argument>
  <argument>-l</argument>
  <argument><%= node["sensu"]["log_directory"] %>\<%= @service %>.log</argument>
  <argument>-L</argument>
  <argument><%= node["sensu"]["log_level"] %></argument>
</service>
